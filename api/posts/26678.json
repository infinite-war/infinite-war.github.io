{"title":"MySQL80 操作要点笔记","slug":"MySQL80操作要点自学笔记","date":"2021-09-22","updated":"2022-01-31","comments":true,"path":"api/posts/26678.json","excerpt":null,"cover":"https://img-blog.csdnimg.cn/21fd39ea59774c04b87944f482587c35.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBASU5GSU5JVEVfV0FS,size_8,color_FFFFFF,t_70,g_se,x_16","covers":["https://img-blog.csdnimg.cn/21fd39ea59774c04b87944f482587c35.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBASU5GSU5JVEVfV0FS,size_8,color_FFFFFF,t_70,g_se,x_16"],"content":"<h1 id=\"前言\"><a href=\"# 前言\" class=\"headerlink\" title=\"前言\"></a>前言 </h1><p> 参考视频：BV1Vy4y1z7EX</p>\n<p>CSDN: <a href=\"https://blog.csdn.net/INFINITE_WAR/article/details/120408155\">https://blog.csdn.net/INFINITE_WAR/article/details/120408155</a></p>\n<p>一些频繁出现的用例名字：<br>emp  员工信息表<br>dept  部门信息表<br>ename  员工名<br>job  工作<br>sal  工资<br>deptno  部门编号</p>\n<h1 id=\"开始\"><a href=\"# 开始\" class=\"headerlink\" title=\"开始\"></a>开始</h1><p>SQL 现为手动模式（cmd 操作，要管理员模式）</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">net <span class=\"keyword\">start</span> MySQL80  <span class=\"operator\">/</span><span class=\"operator\">/</span>打开 MySQL80 服务 </span><br><span class=\"line\">net stop MySQL80   <span class=\"operator\">/</span><span class=\"operator\">/</span> 关闭\t</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://img-blog.csdnimg.cn/21fd39ea59774c04b87944f482587c35.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBASU5GSU5JVEVfV0FS,size_8,color_FFFFFF,t_70,g_se,x_16\" alt=\"请添加图片描述\"><br><img src=\"https://img-blog.csdnimg.cn/c98d0c774349457a895089d75fd2664e.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBASU5GSU5JVEVfV0FS,size_14,color_FFFFFF,t_70,g_se,x_16\" alt=\"请添加图片描述\"><br>需要提前注册 mysql 账号</p>\n<p>xxxx.sql   为 sql 脚本文件，里面编写了大量的 sql 语句，在 mysql 中使用命令‘source   (文件路径)’ 即可执行脚本文件里的所有语句。</p>\n<p>开始会有一个基础数据库 databases，里面嵌套着其他数据库。</p>\n<p>mysql&gt; show databases;<br>+—————————–+<br>| Database                    |<br>+—————————–+<br>| first_database             |              // 自己测试用的表在这里。也可以另行开辟<br>| information_schema   |<br>| mysql                          |<br>| performance_schema|<br>| sakila                          |<br>| sys                              |<br>| world                           |<br>+—————————–+<br>7 rows in set (0.00 sec)</p>\n<p>通过 ‘use （数据库名）’可以打开指定数据库，可以在该数据库中建立表并继续操作。</p>\n<p>打开 first_database 后使用 show tables 命令显示所有的表。</p>\n<p>mysql&gt; show tables;<br>+————————–+<br>| Tables_in_first_database |<br>+————————–+<br>| score                    |<br>| student                  |<br>| tab1                     |<br>+————————–+<br>3 rows in set (0.00 sec)</p>\n<p>student 的创建：</p>\n<p>mysql&gt; CREATE  TABLE  student (<br>    -&gt; id  INT(10)  NOT NULL  UNIQUE  PRIMARY KEY  ,<br>    -&gt; name  VARCHAR(20)  NOT NULL ,<br>    -&gt; sex  VARCHAR(4)  ,<br>    -&gt; birth  YEAR,<br>    -&gt; department  VARCHAR(20) ,<br>    -&gt; address  VARCHAR(50)<br>    -&gt; );<br>Query OK, 0 rows affected, 1 warning (0.07 sec)</p>\n<p>score 的创建：<br>mysql&gt; CREATE  TABLE  score (<br>    -&gt; id  INT(10)  NOT NULL  UNIQUE  PRIMARY KEY  AUTO_INCREMENT ,<br>    -&gt; stu_id  INT(10)  NOT NULL ,<br>    -&gt; c_name  VARCHAR(20) ,<br>    -&gt; grade  INT(10)<br>    -&gt; );</p>\n<h1 id=\"基本命令\"><a href=\"# 基本命令\" class=\"headerlink\" title=\"基本命令\"></a>基本命令</h1><h2 id=\"part1\"><a href=\"#part1\" class=\"headerlink\" title=\"part1\"></a>part1</h2><p>(命令不区分大小写)</p>\n<p>exit// 退出</p>\n<p>==（以下命令要分号结尾，否则会出现无限的“–&gt;”符号让你输入）==</p>\n<p>show databases;   // 显示已有的数据库。 mysql 默认自带了 <strong>4</strong> 个数据库。</p>\n<p>use (数据库名);        // 表示正在使用对应的数据库</p>\n<p>create database （数据库名）;  // 建立一个新的数据库</p>\n<p>show tables;           // 查看 <strong> 某个 </strong> 数据库下有哪些表</p>\n<h2 id=\"part2\"><a href=\"#part2\" class=\"headerlink\" title=\"part2\"></a>part2</h2><p>select version();   // 查看当前 mysql 版本号</p>\n<p>rowback    // 撤销一步</p>\n<p>\\c   // 强制停止当前语句（可以跳出“–&gt;”死循环）</p>\n<h1 id=\"SQL 语句分类\"><a href=\"#SQL 语句分类\" class=\"headerlink\" title=\"SQL 语句分类\"></a>SQL 语句分类 </h1><h2 id=\"DOL\"><a href=\"#DOL\" class=\"headerlink\" title=\"DOL\"></a>DOL</h2><p> 数据库查询语言(凡是带有 select 关键字的都是查询语句)</p>\n<p>select …..;</p>\n<p>== 注：select 本身是不会对原本的数据库进行修改操作的。==</p>\n<h2 id=\"DML\"><a href=\"#DML\" class=\"headerlink\" title=\"DML\"></a>DML</h2><p>数据库操作语言(凡是对表当中的数据进行增删改的都是 DML)</p>\n<p>insert(增) </p>\n<p>delete(删) </p>\n<p>update(改)</p>\n<p>注 DML 主要操作的是 <u> 表中的数据</u></p>\n<h2 id=\"DDL\"><a href=\"#DDL\" class=\"headerlink\" title=\"DDL\"></a>DDL</h2><p>数据定义语言(凡是带有 create、drop、alter 的都是 DDL)</p>\n<p>注：DDL 主要操作的是 <u> 表的结构</u>，而不是表中的数据。</p>\n<p>create: 新建</p>\n<p>drop: 删除</p>\n<p>alter：修改</p>\n<h2 id=\"TCL\"><a href=\"#TCL\" class=\"headerlink\" title=\"TCL\"></a>TCL</h2><p>事务控制语言</p>\n<p>commit;   // 事务提交</p>\n<p>rollback;  // 事务回报</p>\n<h2 id=\"DCL\"><a href=\"#DCL\" class=\"headerlink\" title=\"DCL\"></a>DCL</h2><p>数据控制语言</p>\n<p>grant;     // 授权</p>\n<p>revoke;    // 撤销权限</p>\n<h1 id=\"导入数据\"><a href=\"# 导入数据\" class=\"headerlink\" title=\"导入数据\"></a>导入数据</h1><p>mysql&gt; source  路径 + 文件名</p>\n<p>注：路径不能用中文</p>\n<p>查看表中数据： select * from 表名；</p>\n<p>查看表的结构：desc 表名;        //&lt;—desc 是 describe 的缩写，可以用原词作命令</p>\n<h1 id=\"查询 - 单表查询 part1\"><a href=\"# 查询 - 单表查询 part1\" class=\"headerlink\" title=\"查询 (单表查询 part1)\"></a> 查询 (单表查询 part1)</h1><h2 id=\"查询一个字段\"><a href=\"# 查询一个字段\" class=\"headerlink\" title=\"查询一个字段\"></a> 查询一个字段</h2><p>select 字段名 from 表名;           //select 和 from 都是关键字，字段名和表名都是标识符</p>\n<h2 id=\"查询多个字段\"><a href=\"# 查询多个字段\" class=\"headerlink\" title=\"查询多个字段\"></a>查询多个字段</h2><p>select 字段名 1，字段名 2，….，字段名 n   from   表名;</p>\n<h2 id=\"查询所有字段\"><a href=\"# 查询所有字段\" class=\"headerlink\" title=\"查询所有字段\"></a>查询所有字段 </h2><p> 方法一，把所有字段都写上：</p>\n<p>​        select 字段名 1，字段名 2，….，字段名 n   from   表名;</p>\n<p>方法二，使用 *：   // 缺点：效率低，可读性差</p>\n<p>​        select  *   from   表名;      // 回想一下查看表中数据的命令</p>\n<h2 id=\"查询所有字段并去重\"><a href=\"# 查询所有字段并去重\" class=\"headerlink\" title=\"查询所有字段并去重\"></a>查询所有字段并去重</h2><p>select    ==distinct==   字段名   from   表名     //distinct 关键字必须出现在所有字段名之前</p>\n<h2 id=\"给查询的列起别名\"><a href=\"# 给查询的列起别名\" class=\"headerlink\" title=\"给查询的列起别名\"></a>给查询的列起别名</h2><p>select   (字段名  as  自定义新字段名)   from 表名;     </p>\n<p>// 只是修改名字后显示出来，原本的数据库没有改变。</p>\n<p>// 若字段名有空格，要以  <strong>‘新字段名’</strong>  的形式写入命令（字符串统一使用单引号）。as 可以用空格代替。</p>\n<p>可以对字段使用数学表达式，例如：</p>\n<p>​        select  name ,  <u>score<em>12</u>  from student;       // 可以用  as  给 score</em>12 换名</p>\n<p>会显示：</p>\n<p>+———————-+———————–+</p>\n<p>​     name              |        score*12</p>\n<p>+———————-+———————–+</p>\n<p>|      ……………..        …………………..   |</p>\n<h2 id=\"条件查询\"><a href=\"# 条件查询\" class=\"headerlink\" title=\"条件查询\"></a>条件查询 </h2><h3 id=\"关系运算符\"><a href=\"# 关系运算符\" class=\"headerlink\" title=\"关系运算符\"></a> 关系运算符</h3><table>\n<thead>\n<tr>\n<th align=\"center\">=</th>\n<th align=\"center\">等于</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">&lt;&gt; 或 !=</td>\n<td align=\"center\">不等于</td>\n</tr>\n<tr>\n<td align=\"center\">&lt;、&lt;=、&gt;、&gt;=</td>\n<td align=\"center\">小 (大)(等) 于，</td>\n</tr>\n<tr>\n<td align=\"center\">between (a)  and (b)</td>\n<td align=\"center\">&gt;=a   &amp;&amp; &lt;=b</td>\n</tr>\n<tr>\n<td align=\"center\">is null</td>\n<td align=\"center\">为空</td>\n</tr>\n<tr>\n<td align=\"center\">and</td>\n<td align=\"center\">与</td>\n</tr>\n<tr>\n<td align=\"center\">or</td>\n<td align=\"center\">或</td>\n</tr>\n<tr>\n<td align=\"center\">in</td>\n<td align=\"center\">包含, 相当于多个 or</td>\n</tr>\n<tr>\n<td align=\"center\">not</td>\n<td align=\"center\">非</td>\n</tr>\n<tr>\n<td align=\"center\">like</td>\n<td align=\"center\">模糊查询，支持 % 或 下划线 匹配</td>\n</tr>\n<tr>\n<td align=\"center\">%</td>\n<td align=\"center\">匹配任意字符</td>\n</tr>\n<tr>\n<td align=\"center\">下划线（_）</td>\n<td align=\"center\">匹配一个字符</td>\n</tr>\n</tbody></table>\n<h3 id=\"条件查询语法格式\"><a href=\"# 条件查询语法格式\" class=\"headerlink\" title=\"条件查询语法格式\"></a>条件查询语法格式</h3><p>（为了直观，句子将不写在一行里）</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> </span><br><span class=\"line\"></span><br><span class=\"line\">      字段<span class=\"number\">1</span>，字段<span class=\"number\">2</span>，字段<span class=\"number\">3</span>  ......</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span></span><br><span class=\"line\"></span><br><span class=\"line\">      表名</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">where</span></span><br><span class=\"line\"></span><br><span class=\"line\">​      条件;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"比较不熟悉的关系运算符\"><a href=\"# 比较不熟悉的关系运算符\" class=\"headerlink\" title=\"比较不熟悉的关系运算符\"></a>比较不熟悉的关系运算符 </h3><h4 id=\"in- 的用法\"><a href=\"#in- 的用法\" class=\"headerlink\" title=\"in    的用法\"></a>in    的用法</h4><p> 例：筛选出工资为 5000 或 6000 或 7000 的所有员工</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">不用 <span class=\"keyword\">in</span>：<span class=\"keyword\">select</span>     num , name , job  <span class=\"keyword\">from</span>  tab1 </span><br><span class=\"line\"></span><br><span class=\"line\">​\t\t\t<span class=\"keyword\">where</span>  wage<span class=\"operator\">=</span><span class=\"number\">5000</span>  <span class=\"keyword\">or</span>  wage<span class=\"operator\">=</span><span class=\"number\">6000</span>   <span class=\"keyword\">or</span>  wage<span class=\"operator\">=</span><span class=\"number\">7000</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"> 使用<span class=\"keyword\">in</span>: <span class=\"keyword\">select</span>     num , name , job  <span class=\"keyword\">from</span>  tab1 </span><br><span class=\"line\"></span><br><span class=\"line\">​\t\t\t<span class=\"keyword\">where</span>  wage  <span class=\"keyword\">in</span>  (<span class=\"number\">5000</span>,<span class=\"number\">6000</span>,<span class=\"number\">7000</span>);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"like- 的用法\"><a href=\"#like- 的用法\" class=\"headerlink\" title=\"like   的用法\"></a>like   的用法 </h4><p> 例：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span>  name  <span class=\"keyword\">from</span>  <span class=\"keyword\">table</span>  <span class=\"keyword\">where</span>   name  <span class=\"keyword\">like</span>   &quot;%A%&quot;;</span><br></pre></td></tr></table></figure>\n\n<p>筛选出姓名中含有“A”的姓名。</p>\n<p>其他例：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">找出名字以 T 结尾的：</span><br><span class=\"line\"></span><br><span class=\"line\">​\t\t<span class=\"keyword\">select</span>  name  <span class=\"keyword\">from</span>  <span class=\"keyword\">table</span>  <span class=\"keyword\">where</span>   name  <span class=\"keyword\">like</span>   &quot;%T&quot;;</span><br><span class=\"line\"></span><br><span class=\"line\">找出名字以 K 开始的：</span><br><span class=\"line\"></span><br><span class=\"line\">​\t\t<span class=\"keyword\">select</span>  name  <span class=\"keyword\">from</span>  <span class=\"keyword\">table</span>  <span class=\"keyword\">where</span>   name  <span class=\"keyword\">like</span>   &quot;K%&quot;;</span><br><span class=\"line\"></span><br><span class=\"line\">找出第二个字母是 A 的：</span><br><span class=\"line\"></span><br><span class=\"line\">​\t\t<span class=\"keyword\">select</span>  name  <span class=\"keyword\">from</span>  <span class=\"keyword\">table</span>  <span class=\"keyword\">where</span>   name  <span class=\"keyword\">like</span>   &quot;_A%&quot;;</span><br><span class=\"line\"></span><br><span class=\"line\">找出第三个字母是 R 的：</span><br><span class=\"line\"></span><br><span class=\"line\">​\t\t<span class=\"keyword\">select</span>  name  <span class=\"keyword\">from</span>  <span class=\"keyword\">table</span>  <span class=\"keyword\">where</span>   name  <span class=\"keyword\">like</span>   &quot;__R%&quot;;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>== 从上例可以看出，所谓的模糊查找本质上和正则表达式匹配类似。==</p>\n<h1 id=\"排序 - 单表查询 part2\"><a href=\"# 排序 - 单表查询 part2\" class=\"headerlink\" title=\"排序 (单表查询 part2)\"></a> 排序 (单表查询 part2)</h1><h2 id=\"语法\"><a href=\"# 语法\" class=\"headerlink\" title=\"语法\"></a> 语法 </h2><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">​<span class=\"keyword\">select</span> </span><br><span class=\"line\"></span><br><span class=\"line\">​\t\t字段名<span class=\"number\">1</span>，字段名<span class=\"number\">2.</span>......</span><br><span class=\"line\"></span><br><span class=\"line\">​<span class=\"keyword\">from</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\t表名</span><br><span class=\"line\"></span><br><span class=\"line\">​<span class=\"keyword\">order</span> <span class=\"keyword\">by</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\t指定字段名  ；    <span class=\"operator\">/</span><span class=\"operator\">/</span><span class=\"operator\">=</span><span class=\"operator\">=</span> 默认升序<span class=\"operator\">=</span><span class=\"operator\">=</span></span><br></pre></td></tr></table></figure>\n\n<p>指定降序，则要写成       指定字段名    desc   ;    </p>\n<p>指定升序，则要写成       指定字段名    asc   ;    </p>\n<h2 id=\"多字段排序\"><a href=\"# 多字段排序\" class=\"headerlink\" title=\"多字段排序\"></a>多字段排序</h2><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">select</span> </span><br><span class=\"line\"></span><br><span class=\"line\">​\t\t字段名<span class=\"number\">1</span>，字段名<span class=\"number\">2.</span>......</span><br><span class=\"line\"></span><br><span class=\"line\">​<span class=\"keyword\">from</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\t表名</span><br><span class=\"line\"></span><br><span class=\"line\">​<span class=\"keyword\">order</span> <span class=\"keyword\">by</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\t指定字段名<span class=\"number\">1</span>   （指定顺序）  ，指定字段名<span class=\"number\">2</span>  （指定顺序），......  ；</span><br></pre></td></tr></table></figure>\n<p><u>从左到右优先排序</u>；</p>\n<h2 id=\"根据字段位置排序\"><a href=\"# 根据字段位置排序\" class=\"headerlink\" title=\"根据字段位置排序\"></a>根据字段位置排序</h2><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span>    name   <span class=\"keyword\">from</span>   <span class=\"keyword\">table</span>   <span class=\"keyword\">order</span>  <span class=\"keyword\">by</span>    <span class=\"number\">2</span></span><br></pre></td></tr></table></figure>\n<p>(指定字段名所在的列数，例句中指定第二列的字段) ;</p>\n<h2 id=\"综合案例\"><a href=\"# 综合案例\" class=\"headerlink\" title=\"综合案例\"></a>综合案例 </h2><p> 找出工资在 1250 和 3000 之间的员工信息，要求按照薪资降序排列。</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">select</span>  </span><br><span class=\"line\"></span><br><span class=\"line\">​\t\tename ,sal</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\temp</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">where</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\tsal  <span class=\"keyword\">between</span>  <span class=\"number\">1250</span>  <span class=\"keyword\">and</span>  <span class=\"number\">3000</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">order</span> <span class=\"keyword\">by</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\tsal  <span class=\"keyword\">desc</span>  ; </span><br></pre></td></tr></table></figure>\n<p>语句执行顺序：</p>\n<p>​        step1：from</p>\n<p>​        step2：where</p>\n<p>​        step3：select</p>\n<p>​        step4：order  by</p>\n<h1 id=\"数据处理函数 - 单表查询 part3\"><a href=\"# 数据处理函数 - 单表查询 part3\" class=\"headerlink\" title=\"数据处理函数 (单表查询 part3)\"></a> 数据处理函数 (单表查询 part3)</h1><h2 id=\"单行处理函数\"><a href=\"# 单行处理函数\" class=\"headerlink\" title=\"单行处理函数\"></a> 单行处理函数 </h2><p> 特点：输入一行，输出一行。</p>\n<table>\n<thead>\n<tr>\n<th>lower/upper</th>\n<th>转换成小 (大) 写</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>substr</td>\n<td>取子串</td>\n</tr>\n<tr>\n<td>length</td>\n<td>取长度</td>\n</tr>\n<tr>\n<td>trim(字符串)</td>\n<td>去空格</td>\n</tr>\n<tr>\n<td>str_to_date</td>\n<td>将字符串转换成日期</td>\n</tr>\n<tr>\n<td>date_format</td>\n<td>格式化日期</td>\n</tr>\n<tr>\n<td>round(数值，保留几位小数(-1 是保留到十位))</td>\n<td>四舍五入</td>\n</tr>\n<tr>\n<td>rand()   (直接使用会生成 [0,1) 的随机数)</td>\n<td>生成随机数</td>\n</tr>\n<tr>\n<td>ifnull(数据，该数据的 null 情况用什么值取代)</td>\n<td>将 null 转换成一个具体值</td>\n</tr>\n<tr>\n<td>concat(字符串 1，字符串 2)</td>\n<td>连接两个字符串</td>\n</tr>\n</tbody></table>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">用法：<span class=\"keyword\">select</span>    函数名(参数<span class=\"number\">1</span>，参数<span class=\"number\">2</span>，......)   <span class=\"keyword\">as</span>   自定义列名     <span class=\"keyword\">from</span>   表名;</span><br></pre></td></tr></table></figure>\n\n<p>注：null 加上数值的结果还是 null，故要使用 ifnull 修改最初的 null 值。</p>\n<p><strong>分支处理</strong>(类似于编程里的 if else 语句)：</p>\n<p>例：当员工的工作岗位时 MANAGER 时，工资上调 10%；当工作岗位时 SALESMAN 时，工资上调 50%；其他不变。</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\tename , job ,</span><br><span class=\"line\"></span><br><span class=\"line\">​\t\t<span class=\"operator\">=</span><span class=\"operator\">=</span>(<span class=\"keyword\">case</span>  job  <span class=\"keyword\">when</span>   <span class=\"string\">&#x27;MANAGER&#x27;</span>   <span class=\"keyword\">then</span>  sal <span class=\"operator\">*</span> <span class=\"number\">1.1</span>     <span class=\"keyword\">when</span>    <span class=\"string\">&#x27;SALESMAN&#x27;</span>    <span class=\"keyword\">then</span>   sal <span class=\"operator\">*</span> <span class=\"number\">1.5</span>  <span class=\"keyword\">else</span> sal  <span class=\"keyword\">end</span> )   <span class=\"keyword\">as</span>  newsal<span class=\"operator\">=</span><span class=\"operator\">=</span></span><br><span class=\"line\"></span><br><span class=\"line\">​<span class=\"keyword\">from</span> </span><br><span class=\"line\"></span><br><span class=\"line\">​\t\temp;</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"多行处理函数 - 分组函数\"><a href=\"# 多行处理函数 - 分组函数\" class=\"headerlink\" title=\"多行处理函数 (分组函数)\"></a> 多行处理函数 (分组函数)</h2><p> 特点：输入多行，输出一行。</p>\n<table>\n<thead>\n<tr>\n<th>count(字段名)</th>\n<th>计数</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>sum(字段名)</td>\n<td>求和</td>\n</tr>\n<tr>\n<td>avg(字段名)</td>\n<td>平均值</td>\n</tr>\n<tr>\n<td>max(字段名)</td>\n<td>最大值</td>\n</tr>\n<tr>\n<td>min(字段名)</td>\n<td>最小值</td>\n</tr>\n</tbody></table>\n<p>注：1. 分组函数在使用的时候必须先进行分组，然后使用。</p>\n<p>2. 如果没有对数据进行分组，整张表默认为一组。</p>\n<p>3.== 分组函数会自动处理 null 值。==</p>\n<p>4.count(具体字段)：表示统计该字段下所有不为 null 的元素的个数。</p>\n<p>   count(*): 统计表当中的总行数。</p>\n<p>5. 分组函数 <u> 不能 </u> 中介用在 where 语句中。</p>\n<h1 id=\"分组查询 - 单表查询 part4\"><a href=\"# 分组查询 - 单表查询 part4\" class=\"headerlink\" title=\"分组查询 (单表查询 part4)\"></a> 分组查询 (单表查询 part4)</h1><p> 实际需求：先分组，再对每一组的数据进行操作。</p>\n<p>例：计算每个部门的工资和</p>\n<p>计算每个工作岗位的平均薪资</p>\n<p>找出每个工作岗位的最高薪资</p>\n<h2 id=\"语法 -1\"><a href=\"# 语法 -1\" class=\"headerlink\" title=\"语法\"></a>语法 </h2><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span>             <span class=\"operator\">/</span><span class=\"operator\">/</span><span class=\"operator\">=</span><span class=\"operator\">=</span> 若有 <span class=\"keyword\">group</span>   <span class=\"keyword\">by</span>，则应该只能写 <span class=\"keyword\">group</span>  <span class=\"keyword\">by</span>   后面跟着的字段名<span class=\"operator\">=</span><span class=\"operator\">=</span>, 或分组函数</span><br><span class=\"line\"></span><br><span class=\"line\">​\t\t.....</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\t.....</span><br><span class=\"line\"></span><br><span class=\"line\">(<span class=\"keyword\">where</span>  .....)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">group</span>  <span class=\"keyword\">by</span>       <span class=\"operator\">/</span><span class=\"operator\">/</span> 后面只能跟  参加分组的字段，以及分组函数 </span><br><span class=\"line\"></span><br><span class=\"line\">​\t\t（字段名）.....</span><br><span class=\"line\"></span><br><span class=\"line\">(having......)    <span class=\"operator\">/</span><span class=\"operator\">/</span> 作用和 <span class=\"keyword\">where</span> 差不多，但是必须接在<span class=\"keyword\">group</span>  <span class=\"keyword\">by</span> 后面</span><br><span class=\"line\"></span><br><span class=\"line\">(<span class=\"keyword\">order</span> <span class=\"keyword\">by</span> .....)</span><br></pre></td></tr></table></figure>\n\n<p>执行顺序：</p>\n<p>from  –&gt;  where  –&gt;  group by  –&gt;  select  –&gt;  order by </p>\n<p>例：找出 <u> 每个部门、不同岗位 </u> 的最高薪资</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\tdeptno,job,<span class=\"built_in\">max</span>(sal)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\temp</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">group</span> <span class=\"keyword\">by</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\tdeptno  ,  job;</span><br></pre></td></tr></table></figure>\n\n<p>== 综合案例：==</p>\n<p>找出每个岗位的平均薪资，要求平均薪资大于 1500 的，除 MANAGER 岗位之外，要求按照平均薪资降序排序。</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\tjob  ,  <span class=\"built_in\">avg</span>(sal)  <span class=\"keyword\">as</span>  avgsal</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\temp</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">where</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\tjob  <span class=\"operator\">!=</span>  <span class=\"string\">&#x27;MANAGER&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">group</span> <span class=\"keyword\">by</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\tjob</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">having</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\t<span class=\"built_in\">avg</span>(sal)  <span class=\"operator\">&gt;</span>  <span class=\"number\">1500</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">order</span> <span class=\"keyword\">by</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\tavgsal  <span class=\"keyword\">desc</span>;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"连接查询\"><a href=\"# 连接查询\" class=\"headerlink\" title=\"连接查询\"></a>连接查询 </h1><p><strong> 注：可以先去了解一下关系数据库的连接运算</strong>。</p>\n<p>连接查询的 <u> 目的</u>：多张表联合起来查询数据。</p>\n<p>连接的底层原理是 <u> 笛卡尔积</u>。若连接查询不附带任何注释，则会返回一个数据库字段之间笛卡尔积的结果。</p>\n<p>简单案例：查询每一个人所在的工作部门。</p>\n<p>//SQL92 的解法</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">select</span>   </span><br><span class=\"line\"></span><br><span class=\"line\">​\t\te.ename  ,  d.dname        <span class=\"operator\">/</span><span class=\"operator\">/</span>最好将字段所属的表名通过这种方式标出 </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\temp  e,  dept  d            <span class=\"operator\">/</span><span class=\"operator\">/</span> 表名空格后面为别名。</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">where</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t    emp.deptno  <span class=\"operator\">=</span>  dept.deptno  ;          <span class=\"operator\">/</span><span class=\"operator\">/</span>表的连接条件，通过 <span class=\"keyword\">and</span> 可以写入进一步的过滤条件 </span><br><span class=\"line\">````</span><br><span class=\"line\"></span><br><span class=\"line\">## 内连接</span><br><span class=\"line\"></span><br><span class=\"line\">### 等值连接</span><br><span class=\"line\"></span><br><span class=\"line\"> 上例 SQL99 的语法 </span><br><span class=\"line\">```<span class=\"keyword\">sql</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">select</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\te.ename  ,  d.dname</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\temp e</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">join</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\tdept d</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">on</span>               <span class=\"operator\">/</span><span class=\"operator\">/</span> 独立出来的连接条件</span><br><span class=\"line\"></span><br><span class=\"line\">​\t\te.deptno  <span class=\"operator\">=</span>  d.deptno ;</span><br></pre></td></tr></table></figure>\n\n<p>SQL92 缺点：结构不清晰，表的连接条件，和后期进一步筛选的条件都放在了 where 中。</p>\n<p>SQL99 的优点：表连接的条件是独立的，连接之后，若还要进一步筛选，再写 where 语句。</p>\n<p>SQL99 连接语法：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\t......</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\ta</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">join</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\tb</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">on</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\ta 和 b 的连接条件</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">where</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\t筛选条件</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"非等值连接\"><a href=\"# 非等值连接\" class=\"headerlink\" title=\"非等值连接\"></a>非等值连接</h3><p>where   下的筛选条件不是一个等量关系</p>\n<h3 id=\"自连接\"><a href=\"# 自连接\" class=\"headerlink\" title=\"自连接\"></a>自连接 </h3><p> 样例表：</p>\n<table>\n<thead>\n<tr>\n<th>员工编号</th>\n<th>姓名</th>\n<th>上司编号</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>7369</td>\n<td>SMITH</td>\n<td>7902</td>\n</tr>\n<tr>\n<td>7499</td>\n<td>ALLEN</td>\n<td>7698</td>\n</tr>\n<tr>\n<td>7521</td>\n<td>WARD</td>\n<td>7698</td>\n</tr>\n<tr>\n<td>7566</td>\n<td>JONES</td>\n<td>==7839==</td>\n</tr>\n<tr>\n<td>7654</td>\n<td>MARTIN</td>\n<td>7698</td>\n</tr>\n<tr>\n<td>7698</td>\n<td>BLAKE</td>\n<td>==7839==</td>\n</tr>\n<tr>\n<td>7782</td>\n<td>CLARK</td>\n<td>==7839==</td>\n</tr>\n<tr>\n<td>7788</td>\n<td>SCOTT</td>\n<td>7566</td>\n</tr>\n<tr>\n<td>==7839==</td>\n<td>KING</td>\n<td>NULL</td>\n</tr>\n<tr>\n<td>7844</td>\n<td>TURNER</td>\n<td>7698</td>\n</tr>\n<tr>\n<td>7876</td>\n<td>ANAMS</td>\n<td>7788</td>\n</tr>\n<tr>\n<td>7900</td>\n<td>JAMES</td>\n<td>7698</td>\n</tr>\n<tr>\n<td>7902</td>\n<td>FORD</td>\n<td>7566</td>\n</tr>\n<tr>\n<td>7934</td>\n<td>MILLER</td>\n<td>7782</td>\n</tr>\n</tbody></table>\n<p>内连接用法：查询员工的上司，要求显示员工名和对应的领导名。</p>\n<p>注：同一个表用两个名称</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">select</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\ta. 姓名   <span class=\"keyword\">as</span>  <span class=\"string\">&#x27; 员工名 &#x27;</span>  ，  b. 姓名   <span class=\"keyword\">as</span>   ‘上司名’</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\temp  a</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">join</span> </span><br><span class=\"line\"></span><br><span class=\"line\">​\t\temp  b</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">on</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\ta. 上司编号  <span class=\"operator\">=</span>  b. 员工编号</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"外连接\"><a href=\"# 外连接\" class=\"headerlink\" title=\"外连接\"></a>外连接 </h2><p> 例：给定一个存储员工信息的表 emp  ，一个存储部门信息的表 dept。</p>\n<p>要求连接员工姓名与他对应的部门，并将空的部门也一起显示。（因为有可能有的部门的人都不在表 emp 中）</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span>             （右外连接或右链接） （emp  和  dept 之间存在主次关系。dept 为主）</span><br><span class=\"line\"></span><br><span class=\"line\">​\t\te.ename , d.dname</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\temp  e    <span class=\"keyword\">right</span>  <span class=\"keyword\">join</span>  dept  d       <span class=\"operator\">/</span><span class=\"operator\">/</span><span class=\"keyword\">right</span> 表示 右边的表中没有匹配成功的记录也要\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t显示 </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"operator\">/</span><span class=\"operator\">/</span>(左外连接)\t\tdept   d   <span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"keyword\">left</span><span class=\"operator\">*</span><span class=\"operator\">*</span>    emp   e            这句话与上句话相同</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"operator\">/</span><span class=\"operator\">/</span> 关键字 <span class=\"keyword\">right</span> 表示右边的表一定要全部显示出，<span class=\"keyword\">left</span>同理。</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">on</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\te.deptno <span class=\"operator\">=</span> d.deptno  ;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"多表连接\"><a href=\"# 多表连接\" class=\"headerlink\" title=\"多表连接\"></a>多表连接 </h2><p> 语法：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">select</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t  .............</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\t a</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">join</span>     b</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">on</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\t a 和 b 的连接条件</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">join</span>     c</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">on</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\t a 和 c 的连接条件</span><br><span class=\"line\"></span><br><span class=\"line\">。</span><br><span class=\"line\"></span><br><span class=\"line\">。</span><br><span class=\"line\"></span><br><span class=\"line\">。</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">join</span>     n</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">on</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\t a  和  n  的连接条件  ;</span><br></pre></td></tr></table></figure>\n\n<p><u>注：内连接和外连接可以混合使用。</u></p>\n<p>例：找出每个员工的部门名称以及工资等级，要求：显示出员工名、部门名、薪资、薪资等级。</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">select</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\te.ename , e.sal , d.dname , s.grade</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\temp  e</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">join</span> </span><br><span class=\"line\"></span><br><span class=\"line\">​\t\tdept  d</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">on</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\te.deptno  <span class=\"operator\">=</span>  d.deptno</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">join</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\tsalgrade  s</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">on</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\te.sal  <span class=\"keyword\">between</span>   s.losal    <span class=\"keyword\">and</span>   s.hisal  ;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"union- 关键字\"><a href=\"#union- 关键字\" class=\"headerlink\" title=\"union 关键字\"></a>union 关键字 </h2><p> 数据量大的情况下 union 比普通连接效率高</p>\n<p>前提：连接的两个表选出的列数相同</p>\n<p>例：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> ename, job <span class=\"keyword\">from</span>  emp  <span class=\"keyword\">where</span>  job<span class=\"operator\">=</span><span class=\"string\">&#x27;MANAGER&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">union</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">select</span>  ename ,  job <span class=\"keyword\">from</span> emp  <span class=\"keyword\">where</span>  job<span class=\"operator\">=</span><span class=\"string\">&#x27;SALESMAN&#x27;</span>;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"子查询\"><a href=\"# 子查询\" class=\"headerlink\" title=\"子查询\"></a>子查询</h1><p>select 语句中嵌套 select 语句，嵌入的 select 语句称为子查询</p>\n<p>如：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\t.....（<span class=\"keyword\">select</span>）.....</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\t.....（<span class=\"keyword\">select</span>）.....</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">where</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\t.....（<span class=\"keyword\">select</span>）.....</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"where 中的子查询\"><a href=\"#where 中的子查询\" class=\"headerlink\" title=\"where 中的子查询\"></a>where 中的子查询 </h2><p> 例：找出比最低工资高的员工姓名和工资。</p>\n<p>错误方法：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span>：</span><br><span class=\"line\"></span><br><span class=\"line\">​\t\tename  ,  sal</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\temp</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">where</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\tsal <span class=\"operator\">&gt;</span> <span class=\"built_in\">min</span>(sal) ;           <span class=\"operator\">/</span><span class=\"operator\">/</span>此句错误，min 这种多组函数使用前必须先分组。</span><br></pre></td></tr></table></figure>\n\n<p>思路：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"operator\">/</span><span class=\"operator\">/</span>step1：查询最低工资 </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">select</span>    <span class=\"built_in\">min</span>(sal)   <span class=\"keyword\">from</span>   emp ;    <span class=\"operator\">/</span><span class=\"operator\">/</span> 假设查出为<span class=\"number\">800</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"operator\">/</span><span class=\"operator\">/</span>step2：找出大于最小工资的员工</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">select</span>    ename , sal   <span class=\"keyword\">from</span>   emp   <span class=\"keyword\">where</span>   sal<span class=\"operator\">&gt;</span><span class=\"number\">800</span> ;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"operator\">/</span><span class=\"operator\">/</span>step3：合并前两步</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">select</span>    ename , sal   <span class=\"keyword\">from</span>   emp   <span class=\"keyword\">where</span>   sal<span class=\"operator\">&gt;</span> <span class=\"operator\">&lt;</span>u<span class=\"operator\">&gt;</span>(<span class=\"keyword\">select</span>  <span class=\"built_in\">min</span>(sal)   <span class=\"keyword\">from</span>  emp )<span class=\"operator\">&lt;</span><span class=\"operator\">/</span>u<span class=\"operator\">&gt;</span> ;</span><br></pre></td></tr></table></figure>\n<h2 id=\"from 中的子查询\"><a href=\"#from 中的子查询\" class=\"headerlink\" title=\"from 中的子查询\"></a>from 中的子查询 </h2><p> 这种子查询可以将子查询的查询结果当成一个临时表。（技巧）</p>\n<p>例：找出每个岗位的平均工资的薪资等级。</p>\n<p>思路：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"operator\">/</span><span class=\"operator\">/</span>step1：找出每个岗位的平均工资（按照岗位分组求平均值）</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">select</span>   job  ,  <span class=\"built_in\">avg</span>(sal)   <span class=\"keyword\">from</span>   emp    <span class=\"keyword\">group</span>   <span class=\"keyword\">by</span>   job;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"operator\">/</span><span class=\"operator\">/</span>step2：第一步得到了临时表 t 。现有薪资评级表 salgrade。</span><br></pre></td></tr></table></figure>\n\n<p>t  和  salgrade 连接</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">select</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\tt.<span class=\"operator\">*</span> , s.grade</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\tt</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">join</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\tsalgrade s</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">on</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\tt.<span class=\"built_in\">avg</span>(sal)       <span class=\"keyword\">between</span>   s.losal   ans  s.hisal ;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"operator\">/</span><span class=\"operator\">/</span>step3：合并前两步</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">select</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\tt.<span class=\"operator\">*</span> , s.grade</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\t(<span class=\"keyword\">select</span>  job , <span class=\"operator\">&lt;</span>u<span class=\"operator\">&gt;</span><span class=\"built_in\">avg</span>(sal)  <span class=\"keyword\">as</span>  avgsal<span class=\"operator\">&lt;</span><span class=\"operator\">/</span>u<span class=\"operator\">&gt;</span>  <span class=\"keyword\">from</span>  emp  <span class=\"keyword\">group</span>  <span class=\"keyword\">by</span>  job)  t</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">join</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\tsalgrade s</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">on</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\t<span class=\"operator\">&lt;</span>u<span class=\"operator\">&gt;</span>t.avgsal<span class=\"operator\">&lt;</span><span class=\"operator\">/</span>u<span class=\"operator\">&gt;</span>       <span class=\"keyword\">between</span>   s.losal   ans  s.hisal ;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"select 中的子查询\"><a href=\"#select 中的子查询\" class=\"headerlink\" title=\"select 中的子查询\"></a>select 中的子查询 </h2><p> 例：找出每个员工的部门名称，要求显示员工名，部门名。</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">select</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\te.ename , (<span class=\"keyword\">select</span>  d.dname  <span class=\"keyword\">from</span>   dept  d    <span class=\"keyword\">where</span>    e.deptno <span class=\"operator\">=</span> d.deptno) <span class=\"keyword\">as</span> \t\t\tdname</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\temp;</span><br></pre></td></tr></table></figure>\n<p>注：对于每一条记录，若子查询超过一条就会报错。</p>\n<h1 id=\"分页查询\"><a href=\"# 分页查询\" class=\"headerlink\" title=\"分页查询\"></a>分页查询 </h1><h2 id=\"limit 关键字\"><a href=\"#limit 关键字\" class=\"headerlink\" title=\"limit 关键字\"></a>limit 关键字</h2><p> 目的：将查询结果集的一部分取出来。（搜索引擎搜索结果的分页）</p>\n<p>用法：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">limit    startindex，length       <span class=\"operator\">/</span><span class=\"operator\">/</span>写在<span class=\"keyword\">order</span>  <span class=\"keyword\">by</span>  后面</span><br></pre></td></tr></table></figure>\n\n<p>例：按照薪资排序，取出排名前 5 的员工。</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span>  </span><br><span class=\"line\"></span><br><span class=\"line\">​\t\tename , sal</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\temp</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">order</span> <span class=\"keyword\">by</span> </span><br><span class=\"line\"></span><br><span class=\"line\">​\t\tsal <span class=\"keyword\">desc</span></span><br><span class=\"line\"></span><br><span class=\"line\">limit    <span class=\"number\">0</span>,<span class=\"number\">5</span>        <span class=\"operator\">/</span><span class=\"operator\">/</span>也可以写成  limit   <span class=\"number\">5</span>。表中的记录从 <span class=\"number\">0</span> 开始。</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"分页\"><a href=\"# 分页\" class=\"headerlink\" title=\"分页\"></a>分页 </h2><p> 每页显示 pageSize 条记录</p>\n<p>​        第 pageNo 页：limit （pageNo - 1）* pageSize  ， pageSize</p>\n<p>如：<br>第 1 页：limit 0，3    [0  1  2]</p>\n<p>第 2 页：limit 3，3    [3  4  5]</p>\n<p>第 3 页：limit 6，3    [6  7  8]</p>\n<p>第 4 页：limit 9，3    [0  1  2]</p>\n<h1 id=\"建表\"><a href=\"# 建表\" class=\"headerlink\" title=\"建表\"></a>建表 </h1><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> 创建表格式：<span class=\"keyword\">create</span>  <span class=\"keyword\">table</span>  表名（字段名 <span class=\"number\">1</span>  数据类型，字段名<span class=\"number\">2</span>  数据类型，。。）;</span><br><span class=\"line\"></span><br><span class=\"line\"> 删除表格式：<span class=\"keyword\">drop</span>  <span class=\"keyword\">table</span>  if   <span class=\"keyword\">exists</span>    (要删除的表名) ;</span><br><span class=\"line\"></span><br><span class=\"line\">添加记录：<span class=\"keyword\">insert</span>  <span class=\"keyword\">into</span>   表名  <span class=\"keyword\">values</span>(字段名和值一一对应)  ;</span><br></pre></td></tr></table></figure>\n\n<p>常见数据类型：varchar(动态分配字符串内存)，char(静态分配)，int，bigint，float，double，date(短日期)，datetime（长日期），clob(字符大对象)，blob(二进制大对象)</p>\n<p>clob：可以存储最多 4G 的大字符串（如文章）。</p>\n<p>blob：存储图片、声音、视频等流媒体数据。需要使用 IO 流</p>\n<h2 id=\"修改（update）\"><a href=\"# 修改（update）\" class=\"headerlink\" title=\"修改（update）\"></a>修改（update）</h2><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">update  </span><br><span class=\"line\"></span><br><span class=\"line\">​\t\t表名  </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">set</span>  \t\t<span class=\"operator\">/</span><span class=\"operator\">/</span>修改具体值 </span><br><span class=\"line\"></span><br><span class=\"line\">​\t\t字段名<span class=\"number\">1</span><span class=\"operator\">=</span> 值<span class=\"number\">1</span>，字段名 <span class=\"number\">2</span><span class=\"operator\">=</span> 值<span class=\"number\">2</span>，。。。</span><br><span class=\"line\"></span><br><span class=\"line\">where... ;<span class=\"operator\">/</span><span class=\"operator\">/</span>指定特定条件的记录，不写 <span class=\"keyword\">where</span> 默认修改所有记录</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"删除记录 delete（DML）\"><a href=\"# 删除记录 delete（DML）\" class=\"headerlink\" title=\"删除记录 delete（DML）\"></a>删除记录 delete（DML）</h2><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">delete</span>   <span class=\"keyword\">from</span>   表名   <span class=\"keyword\">where</span>  ......；<span class=\"operator\">/</span><span class=\"operator\">/</span>不写 <span class=\"keyword\">where</span> 会删除所有数据</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"插入多条记录\"><a href=\"# 插入多条记录\" class=\"headerlink\" title=\"插入多条记录\"></a>插入多条记录 </h2><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">insert</span>  <span class=\"keyword\">into</span>  表名（字段名<span class=\"number\">1</span>，字段名<span class=\"number\">2</span>。。。）   <span class=\"keyword\">values</span></span><br><span class=\"line\"></span><br><span class=\"line\">（元组一），</span><br><span class=\"line\"></span><br><span class=\"line\">（元组二），</span><br><span class=\"line\"></span><br><span class=\"line\">。。。，</span><br><span class=\"line\"></span><br><span class=\"line\">（元组 n）;   <span class=\"operator\">/</span><span class=\"operator\">/</span> 元组数据类型必须与第一行的字段名一一对应</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"快捷命令\"><a href=\"# 快捷命令\" class=\"headerlink\" title=\"快捷命令\"></a>快捷命令 </h2><h3 id=\"快速创建表\"><a href=\"# 快速创建表\" class=\"headerlink\" title=\"快速创建表\"></a> 快速创建表 </h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span>    <span class=\"keyword\">table</span>   新表名   <span class=\"keyword\">as</span>   <span class=\"keyword\">select</span>   <span class=\"operator\">*</span>  <span class=\"keyword\">from</span>   原表名;   <span class=\"operator\">/</span><span class=\"operator\">/</span><span class=\"keyword\">select</span> 语句可以按需求扩充内容（如 <span class=\"keyword\">where</span>，<span class=\"keyword\">order</span> <span class=\"keyword\">by</span> 等）</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"快速删除数据\"><a href=\"# 快速删除数据\" class=\"headerlink\" title=\"快速删除数据\"></a>快速删除数据 </h3><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">truncate</span>  <span class=\"keyword\">table</span>  表名 ;   <span class=\"operator\">/</span><span class=\"operator\">/</span> 与‘<span class=\"keyword\">delete</span>   <span class=\"keyword\">from</span>   表名’     相同</span><br></pre></td></tr></table></figure>\n\n<p>truncate 和 delete 的区别</p>\n<table>\n<thead>\n<tr>\n<th>truncate</th>\n<th>delete</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>删除效率相对比较高，表被依次截断，物理删除</td>\n<td>表中的数据被删除了，但是删除的数据在硬盘上的真实存储空间不会被释放</td>\n</tr>\n<tr>\n<td>缺点：不支持撤销操作</td>\n<td>缺点：删除效率较低（一亿条记录时要 1 小时才能删完）</td>\n</tr>\n<tr>\n<td>有点：快速（数据量非常大的时候推荐使用。一亿条记录是删除时间不到 1 秒）</td>\n<td>优点：支持撤销操作</td>\n</tr>\n<tr>\n<td>是 DDL 语句</td>\n<td>是 DML 语句</td>\n</tr>\n</tbody></table>\n<h1 id=\"约束\"><a href=\"# 约束\" class=\"headerlink\" title=\"约束\"></a>约束 </h1><p> 目的：确保数据的完整性、有效性。</p>\n<p>常见约束：非空约束(not null)、唯一性约束(unique)、主键约束(primary key ，PK)、外键约束(foreign key，FK)、检查约束(check)</p>\n<h2 id=\"非空约束\"><a href=\"# 非空约束\" class=\"headerlink\" title=\"非空约束\"></a>非空约束</h2><p>not null 约束的字段不能为 NULL。</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">drop</span>  <span class=\"keyword\">table</span>  if  exist  t_vip;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">create</span>  <span class=\"keyword\">table</span>  t_vip(</span><br><span class=\"line\"></span><br><span class=\"line\">    id  <span class=\"type\">int</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">    name   carchar(<span class=\"number\">255</span>)   <span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"keyword\">not</span>  <span class=\"keyword\">null</span><span class=\"operator\">*</span><span class=\"operator\">*</span></span><br><span class=\"line\"></span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"唯一性约束\"><a href=\"# 唯一性约束\" class=\"headerlink\" title=\"唯一性约束\"></a>唯一性约束</h2><p>unique 约束的字段不能重复，但是可以为 NULL。</p>\n<p>使用例：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">drop</span>  <span class=\"keyword\">table</span>  if  exist  t_vip;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">create</span>  <span class=\"keyword\">table</span>  t_vip(</span><br><span class=\"line\"></span><br><span class=\"line\">    id  <span class=\"type\">int</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">    name   carchar(<span class=\"number\">255</span>)   <span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"keyword\">unique</span><span class=\"operator\">*</span><span class=\"operator\">*</span>,            <span class=\"operator\">/</span><span class=\"operator\">/</span>该字段的内容不能重复</span><br><span class=\"line\"></span><br><span class=\"line\">    email  <span class=\"type\">varchar</span>(<span class=\"number\">255</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<p>推广：不同字段在特定条件下可以联合设置为唯一性约束。（如：两个人姓名相同，但是电话号码不同。或者说一个人有多个电话号码记录）</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">drop</span>  <span class=\"keyword\">table</span>  if  exist  t_vip;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">create</span>  <span class=\"keyword\">table</span>  t_vip(</span><br><span class=\"line\"></span><br><span class=\"line\">\tid  <span class=\"type\">int</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">\tname   carchar(<span class=\"number\">255</span>) ，   </span><br><span class=\"line\"></span><br><span class=\"line\">\temail  <span class=\"type\">varchar</span>(<span class=\"number\">255</span>)  ，</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">unique</span>(name , email)      <span class=\"operator\">/</span><span class=\"operator\">/</span>联合唯一性</span><br><span class=\"line\"></span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<p>下例为 unique 和 not  null  联合使用</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">drop</span>  <span class=\"keyword\">table</span>  if  exist  t_vip;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">create</span>  <span class=\"keyword\">table</span>  t_vip(</span><br><span class=\"line\"></span><br><span class=\"line\">\tid  <span class=\"type\">int</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">\tname   carchar(<span class=\"number\">255</span>)   <span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"keyword\">not</span>  <span class=\"keyword\">null</span>  <span class=\"keyword\">unique</span><span class=\"operator\">*</span><span class=\"operator\">*</span>,   <span class=\"operator\">/</span><span class=\"operator\">/</span>该字段的内容不能重复也不能为空</span><br><span class=\"line\"></span><br><span class=\"line\">\temail  <span class=\"type\">varchar</span>(<span class=\"number\">255</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<p>这种联合的效果就是主键约束，也就是说，可以直接用 PK 约束实现前两种约束的联合。</p>\n<h2 id=\"主键约束\"><a href=\"# 主键约束\" class=\"headerlink\" title=\"主键约束\"></a>主键约束 </h2><p> 术语：主键约束、主键字段、主键值</p>\n<p>主键例：学号、身份证……</p>\n<p>建议设为主键的类型：int、bigint、char 等。（varchar 不建议）</p>\n<p><strong>注：一个表中只能设置一个主键</strong></p>\n<p>特征：not  null  、 unique</p>\n<h3 id=\"单一主键和复合主键（分类一）\"><a href=\"# 单一主键和复合主键（分类一）\" class=\"headerlink\" title=\"单一主键和复合主键（分类一）\"></a>单一主键和复合主键（分类一）</h3><p>使用例：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">drop</span>  <span class=\"keyword\">table</span>  if  exist  t_vip;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">create</span>  <span class=\"keyword\">table</span>  t_vip(</span><br><span class=\"line\"></span><br><span class=\"line\">\tid  <span class=\"type\">int</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">\tname   carchar(<span class=\"number\">255</span>)   <span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"keyword\">primary</span>  key <span class=\"operator\">*</span><span class=\"operator\">*</span>   ， </span><br><span class=\"line\"></span><br><span class=\"line\">\temail  <span class=\"type\">varchar</span>(<span class=\"number\">255</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<p>复合主键使用例：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">drop</span>  <span class=\"keyword\">table</span>  if  exist  t_vip;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">create</span>  <span class=\"keyword\">table</span>  t_vip(</span><br><span class=\"line\"></span><br><span class=\"line\">\tid  <span class=\"type\">int</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">\tname   carchar(<span class=\"number\">255</span>) ，    </span><br><span class=\"line\"></span><br><span class=\"line\">\temail  <span class=\"type\">varchar</span>(<span class=\"number\">255</span>)，</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">primary</span>  key（id，name）     <span class=\"operator\">/</span><span class=\"operator\">/</span>号码、姓名同时相同时才算重复。</span><br><span class=\"line\"></span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"自然主键和业务主键（分类二）\"><a href=\"# 自然主键和业务主键（分类二）\" class=\"headerlink\" title=\"自然主键和业务主键（分类二）\"></a>自然主键和业务主键（分类二）</h3><p>自然主键：主键值是一个自然数，和业务无关。&lt;== 使用较多</p>\n<p>业务主键：主键值和业务关联，例如银行卡号。</p>\n<p>自动维护主键值使用例：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">drop</span>  <span class=\"keyword\">table</span>  if  exist  t_vip;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">create</span>  <span class=\"keyword\">table</span>  t_vip(</span><br><span class=\"line\"></span><br><span class=\"line\">\tid  <span class=\"type\">int</span>    <span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"keyword\">primary</span>  key   auto_increment<span class=\"operator\">*</span><span class=\"operator\">*</span>  </span><br><span class=\"line\"></span><br><span class=\"line\">\tname   carchar(<span class=\"number\">255</span>) ，</span><br><span class=\"line\"></span><br><span class=\"line\">\temail  <span class=\"type\">varchar</span>(<span class=\"number\">255</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"外键约束\"><a href=\"# 外键约束\" class=\"headerlink\" title=\"外键约束\"></a>外键约束 </h2><p> 相关术语：外键约束、外键字段(添加了外键约束的字段)、外键值(可以为 null)。</p>\n<p>应用场景：处理学生和班级时，应当把班级额外设置为一个表再对学生进行外键约束。（t_class   ,  t_student）</p>\n<p>t_class</p>\n<table>\n<thead>\n<tr>\n<th>classno</th>\n<th>classname</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>100</td>\n<td>一班</td>\n</tr>\n<tr>\n<td>101</td>\n<td>二班</td>\n</tr>\n</tbody></table>\n<p>t_student</p>\n<table>\n<thead>\n<tr>\n<th>no</th>\n<th>name</th>\n<th>cno</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>1</td>\n<td>jack</td>\n<td>100</td>\n</tr>\n<tr>\n<td>2</td>\n<td>lucy</td>\n<td>100</td>\n</tr>\n<tr>\n<td>3</td>\n<td>lilei</td>\n<td>100</td>\n</tr>\n<tr>\n<td>4</td>\n<td>bob</td>\n<td>100</td>\n</tr>\n<tr>\n<td>5</td>\n<td>ben</td>\n<td>101</td>\n</tr>\n<tr>\n<td>6</td>\n<td>alice</td>\n<td>101</td>\n</tr>\n<tr>\n<td>7</td>\n<td>alex</td>\n<td>100</td>\n</tr>\n<tr>\n<td>8</td>\n<td>zhangsan</td>\n<td>101</td>\n</tr>\n</tbody></table>\n<p>t_class 是父表，t_student 是子表。</p>\n<p>删除表的顺序：先删子，再删父。</p>\n<p>创建表的顺序：先创建父，再创建子。</p>\n<p>删除数据的顺序：先删子，再删父。</p>\n<p>插入数据的顺序：先插入父，再插入子。</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">drop</span>  <span class=\"keyword\">table</span>  if  exist   t_student;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">drop</span>  <span class=\"keyword\">table</span>  if  exist   t_class;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">create</span>  <span class=\"keyword\">table</span>  t_class(</span><br><span class=\"line\"></span><br><span class=\"line\">​\t\tclassno  <span class=\"type\">int</span>  <span class=\"keyword\">primary</span>  key,</span><br><span class=\"line\"></span><br><span class=\"line\">​\t\tclassname   <span class=\"type\">varchar</span>(<span class=\"number\">255</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">create</span>  <span class=\"keyword\">table</span>  t_student(</span><br><span class=\"line\"></span><br><span class=\"line\">​\t\t<span class=\"keyword\">no</span>  <span class=\"type\">int</span>  <span class=\"keyword\">primary</span>   key  auto_increment,</span><br><span class=\"line\"></span><br><span class=\"line\">​\t\tname  <span class=\"type\">varchar</span>(<span class=\"number\">255</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">​\t\tcno  <span class=\"type\">int</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">​\t\t<span class=\"operator\">*</span><span class=\"operator\">*</span><span class=\"keyword\">foreign</span>  key(cno)  <span class=\"keyword\">references</span>  t_class(classno)<span class=\"operator\">*</span><span class=\"operator\">*</span>  </span><br><span class=\"line\"></span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"存储引擎\"><a href=\"# 存储引擎\" class=\"headerlink\" title=\"存储引擎\"></a>存储引擎 </h1><p> 注：存储引擎是 mysql 的特有术语。</p>\n<p>存储引擎即数据内容的存储方式，如：ANSI,UTF-8 等。</p>\n<p>查看 mysql 支持哪些存储引擎：show  engines</p>\n<p>展示新建表的存储引擎：show  create  table  (表名)</p>\n<p>指定引擎使用例：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span>  <span class=\"keyword\">table</span>  t_product(</span><br><span class=\"line\"></span><br><span class=\"line\">​\t\tid  <span class=\"type\">int</span>  <span class=\"keyword\">primary</span>  key ,</span><br><span class=\"line\"></span><br><span class=\"line\">​\t\tname  <span class=\"type\">varchar</span>(<span class=\"number\">255</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">)engine<span class=\"operator\">=</span>InnoDB  <span class=\"keyword\">default</span>  charset<span class=\"operator\">=</span>utf8;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"My-ISAM 存储引擎\"><a href=\"#My-ISAM 存储引擎\" class=\"headerlink\" title=\"My ISAM 存储引擎\"></a>My ISAM 存储引擎 </h2><p> 使用三个文件表示每一个表：</p>\n<p>​        格式文件：存储表结构的定义   xxx.frm</p>\n<p>​        数据文件：存储表行的内容  xxx.MYD</p>\n<p>​        索引 (目录) 文件：存储表上索引   xxx.MYI</p>\n<p>特点：可以转换为压缩、只读表来节省空间。</p>\n<h2 id=\"InnoDB 存储引擎（默认引擎）\"><a href=\"#InnoDB 存储引擎（默认引擎）\" class=\"headerlink\" title=\"InnoDB 存储引擎（默认引擎）\"></a>InnoDB 存储引擎（默认引擎）</h2><p>InnoDB 支持事务，支持数据库崩溃后自动恢复机制</p>\n<p>特点：非常安全，效率不高，不能压缩或转换为只读。</p>\n<p>InnoDB 管理的表的特征：</p>\n<p>​        每个 InnoDB 表再数据库目录中以 .frm  格式文件表示</p>\n<p>​        InnoDB 表空间 tablespace 被用于存储表的内容</p>\n<p>​        提供一组用来记录事务性活动的日志文件</p>\n<p>​        用 COMMIT(提交)，SAVEPOINT 以及 ROOLBACK 支持事务处理</p>\n<p>​        提供全 ACID 兼容</p>\n<p>​        在 mysql 服务器崩溃后会自动回复</p>\n<p>​        多版本 (MVCC) 和行级锁定</p>\n<p>​        支持外键及引用的完整性，包括级联删除和更新</p>\n<h2 id=\"MEMORY 存储引擎\"><a href=\"#MEMORY 存储引擎\" class=\"headerlink\" title=\"MEMORY 存储引擎\"></a>MEMORY 存储引擎 </h2><p> 数据存储在内存中，且行的长度固定</p>\n<p>特点：查询速度快，不安全</p>\n<p>MEMORY 管理的表的特征：</p>\n<p>​        在数据库目录内，每个表均以  .frm  格式的文件表示。</p>\n<p>​        表数据及索引被存储在内存中</p>\n<p>​        表级锁机制</p>\n<p>​        不能包含 TEXT 或 BLOB 字段</p>\n<h1 id=\"事务 -DML 语句\"><a href=\"# 事务 -DML 语句\" class=\"headerlink\" title=\"事务 (DML 语句)\"></a> 事务 (DML 语句)</h1><p> 定义：一个事务是一个完整的业务逻辑。</p>\n<p>事务特性：</p>\n<p>​        A(原子性)：事务是最小的工作单元，不可再分。</p>\n<p>​        C(一致性)：一系列操作必须同时成功或同时失败。</p>\n<p>​        I(隔离性)：不同事务之间不影响</p>\n<p>​        D(持久性)：保存内容，提供保障。</p>\n<p>完整的业务逻辑例：</p>\n<p>​        业务：A 转账 10000 元给 B</p>\n<p>​        步骤：A 的账户 -10000，B 的账户 +10000。</p>\n<p>这一系列操作必须同时成功或同时失败。</p>\n<p>即，一个事务就是一系列的 DML 语句。</p>\n<p>注：InnoDB 会提供一组用来记录事务性活动的日志文件</p>\n<p>如：</p>\n<p>事务开启，写入日志</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">insert...</span><br><span class=\"line\"></span><br><span class=\"line\">insert...</span><br><span class=\"line\"></span><br><span class=\"line\">.</span><br><span class=\"line\"></span><br><span class=\"line\">.</span><br><span class=\"line\"></span><br><span class=\"line\">.</span><br><span class=\"line\"></span><br><span class=\"line\">事务结束，写入日志          <span class=\"operator\">/</span><span class=\"operator\">/</span>提交事务 </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"> 提交事务：<span class=\"keyword\">commit</span> ；语句 </span><br><span class=\"line\"></span><br><span class=\"line\"> 回滚事务：<span class=\"keyword\">rollback</span> ；语句     <span class=\"operator\">/</span><span class=\"operator\">/</span>回到上一次提交的位置 </span><br><span class=\"line\"></span><br><span class=\"line\"> 关闭自动提交操作：<span class=\"keyword\">start</span>    transaction；</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"事务隔离\"><a href=\"# 事务隔离\" class=\"headerlink\" title=\"事务隔离\"></a>事务隔离 </h2><p> 级别：</p>\n<p>​        读未提交：read  uncommitted(不提交也读到)            最低级</p>\n<p>​                事务 A 读到事务 B 未提交的数据。易产生脏数据(Dirty  Read)。</p>\n<p>​        读已提交：read  committed  (提交了才能读到)</p>\n<p>​                事务 A 只能读到事务 B 提交之后的数据。</p>\n<p>​                不可重复读数据。如：事务开启后，第一次读到的数据是 3 条，当前事务还没有结束，可能第二次在读取的时候，读到的数据是 4 条，3 不等于 4。</p>\n<p>​        可重复读：repeatable   read    (提交了也读不到)   //mysql 默认级别</p>\n<p>​                读取的是数据的幻象，读到的都是事务刚开始时的数据。</p>\n<p>​        序列化：serializable            最高级</p>\n<p>​                效率低，但是解决了所有的问题</p>\n<p>​                这种级别表示事务排队，不能并发。</p>\n<h1 id=\"索引\"><a href=\"# 索引\" class=\"headerlink\" title=\"索引\"></a>索引 </h1><p> 类似于书的目录，提高搜索效率。</p>\n<p>mysql 查询的方式：1. 全表扫描。2. 根据索引检索</p>\n<p>索引必须排序。索引和 TreeSet(底层是 AVL)数据结构相同。</p>\n<p>在 mysql 中，索引是一个 B 树。</p>\n<p>复合索引：两个及以上字段联合起来添加一个索引。</p>\n<h2 id=\"语法 -2\"><a href=\"# 语法 -2\" class=\"headerlink\" title=\"语法\"></a>语法 </h2><p> 创建索引</p>\n<p>​        </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span>  index  emp_ename_index  <span class=\"keyword\">on</span>  emp(ename) ;</span><br><span class=\"line\"></span><br><span class=\"line\">​\t\t给 emp 表的 ename 字段添加索引，命名：emp_ename_index</span><br></pre></td></tr></table></figure>\n\n<p>删除索引</p>\n<p>​        </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">drop</span>  index  emp_ename_index  <span class=\"keyword\">on</span>  emp;</span><br><span class=\"line\"></span><br><span class=\"line\">​\t\t将 emp 表上的 emp_ename_index 索引对象删除</span><br></pre></td></tr></table></figure>\n\n<p>检查是否有索引</p>\n<p>​    </p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">explain  <span class=\"operator\">*</span>  <span class=\"keyword\">from</span>   emp   <span class=\"keyword\">where</span>   ename  <span class=\"operator\">=</span>‘XXX’;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"索引失效\"><a href=\"# 索引失效\" class=\"headerlink\" title=\"索引失效\"></a>索引失效</h2><p>1. 尽量避免模糊查询时以“%”开始。</p>\n<p>2. 使用 or 关键字时两边的字段都要有索引，否则不会调用索引。</p>\n<p>3. 使用复合索引的时候，没有使用左侧的列查找，索引会失效</p>\n<p>4. 在 where 中索引列若参与的运算，索引会失效。</p>\n<p>5. 在 where 中索引列使用了函数，索引会失效。</p>\n<p>……</p>\n<h2 id=\"索引分类\"><a href=\"# 索引分类\" class=\"headerlink\" title=\"索引分类\"></a>索引分类 </h2><p> 索引是各种数据库进行优化的重要手段，优化的时候优先考虑的就是索引。</p>\n<p>分类一：单一索引、复合索引。</p>\n<p>分类二：主键索引、唯一性索引(在有 unique 约束的字段上添加索引)</p>\n<h1 id=\"视图 -view\"><a href=\"# 视图 -view\" class=\"headerlink\" title=\"视图 (view)\"></a> 视图 (view)</h1><p> 创建视图对象：create  view  dept2_view  as  select  *  from  dept2;</p>\n<p>注：上面 as 关键字后的语句必须是 DQL 语句。</p>\n<p>删除视图：drop  view  dept2_view;</p>\n<p>对视图对象的增删改查，会导致原表被操作。</p>\n<p>视图本质就是将一块 SQL 语句进行封装，以便复用时节省空间。</p>\n<p>如：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">create</span>  <span class=\"keyword\">view</span>\temp_dept_view</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">as</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\t<span class=\"keyword\">select</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\t\te.ename ,  e.sal , d.dname</span><br><span class=\"line\"></span><br><span class=\"line\">​\t\t<span class=\"keyword\">from</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\t\temp e</span><br><span class=\"line\"></span><br><span class=\"line\">​\t\t<span class=\"keyword\">join</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\t\tdept d</span><br><span class=\"line\"></span><br><span class=\"line\">​\t\t<span class=\"keyword\">on</span></span><br><span class=\"line\"></span><br><span class=\"line\">​\t\t\te.deptno <span class=\"operator\">=</span> d.deptno ;</span><br></pre></td></tr></table></figure>\n\n<p>as  后面的整块 SQL 语句被封装进了 emp_dept_view 中</p>\n<h1 id=\"数据库设计范式\"><a href=\"# 数据库设计范式\" class=\"headerlink\" title=\"数据库设计范式\"></a>数据库设计范式 </h1><p> 目的：设计合理的数据库表，避免数据冗余、空间浪费。</p>\n<p>分类：</p>\n<p>​        第一范式：要求任何一张表必须有主键，每一个字段的原子性不可再分。</p>\n<p>​        第二范式：建立在第一范式之上，要求所有非主键字段完全依赖主键，不要产生部分依赖。</p>\n<p>​        第三范式：建立在第二范式之上，要求所有非主关键字直接依赖主键，不要产生传递依赖。</p>\n<h2 id=\"第一范式\"><a href=\"# 第一范式\" class=\"headerlink\" title=\"第一范式\"></a>第一范式 </h2><p> 最核心最重要的范式，所有表的设计都要满足。</p>\n<p>有主键，且字段内容不可再分的表满足第一范式。</p>\n<h2 id=\"第二范式\"><a href=\"# 第二范式\" class=\"headerlink\" title=\"第二范式\"></a>第二范式</h2><table>\n<thead>\n<tr>\n<th>学生编号(复合主键)</th>\n<th>教师编号(复合主键)</th>\n<th>学生姓名</th>\n<th>教师姓名</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>1001</td>\n<td>001</td>\n<td>张三</td>\n<td>王老师</td>\n</tr>\n<tr>\n<td>1002</td>\n<td>002</td>\n<td>李四</td>\n<td>赵老师</td>\n</tr>\n<tr>\n<td>1003</td>\n<td>001</td>\n<td>王五</td>\n<td>王老师</td>\n</tr>\n<tr>\n<td>1001</td>\n<td>002</td>\n<td>张三</td>\n<td>赵老师</td>\n</tr>\n</tbody></table>\n<p>这种表不符合第二范式，因为学生只依赖学生编号，老师只依赖教师编号，数据易冗余。</p>\n<p>为了满足第二范式，要将上面的表分解成多个子表(如下)。</p>\n<p>学生表</p>\n<table>\n<thead>\n<tr>\n<th>学生编号(pk)</th>\n<th>学生名字</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>1001</td>\n<td>张三</td>\n</tr>\n<tr>\n<td>1002</td>\n<td>李四</td>\n</tr>\n<tr>\n<td>1003</td>\n<td>王五</td>\n</tr>\n</tbody></table>\n<p>教师表</p>\n<table>\n<thead>\n<tr>\n<th>教师编号(pk)</th>\n<th>教师姓名</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>001</td>\n<td>王老师</td>\n</tr>\n<tr>\n<td>002</td>\n<td>赵老师</td>\n</tr>\n</tbody></table>\n<p>学生教师关系表</p>\n<table>\n<thead>\n<tr>\n<th>id(pk)</th>\n<th>学生编号(fk)</th>\n<th>教师编号(fk)</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>1</td>\n<td>1001</td>\n<td>001</td>\n</tr>\n<tr>\n<td>2</td>\n<td>1002</td>\n<td>002</td>\n</tr>\n<tr>\n<td>3</td>\n<td>1003</td>\n<td>001</td>\n</tr>\n<tr>\n<td>4</td>\n<td>1001</td>\n<td>002</td>\n</tr>\n</tbody></table>\n<p><u>多对多设计技巧：多对多，三张表，关系表两个外键。</u></p>\n<h2 id=\"第三范式\"><a href=\"# 第三范式\" class=\"headerlink\" title=\"第三范式\"></a>第三范式</h2><table>\n<thead>\n<tr>\n<th>学生编号(pk)</th>\n<th>学生姓名</th>\n<th>班级编号</th>\n<th>班级名称</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>1001</td>\n<td>张三</td>\n<td>01</td>\n<td>一班</td>\n</tr>\n<tr>\n<td>1002</td>\n<td>李四</td>\n<td>02</td>\n<td>二班</td>\n</tr>\n<tr>\n<td>1003</td>\n<td>王五</td>\n<td>03</td>\n<td>三班</td>\n</tr>\n<tr>\n<td>1004</td>\n<td>赵六</td>\n<td>04</td>\n<td>四班</td>\n</tr>\n</tbody></table>\n<p>上标满足第一、二范式。</p>\n<p>不满足第三范式，因为班级名称依赖班级编号，而班级编号又依赖学生编号，这就产生了传递依赖，会有数据冗余。</p>\n<p>为满足第三范式，可以将上标拆成两张表(如下)。</p>\n<p>班级表</p>\n<table>\n<thead>\n<tr>\n<th>班级编号(pk)</th>\n<th>班级名称</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>01</td>\n<td>一班</td>\n</tr>\n<tr>\n<td>02</td>\n<td>二班</td>\n</tr>\n<tr>\n<td>03</td>\n<td>三班</td>\n</tr>\n<tr>\n<td>04</td>\n<td>四班</td>\n</tr>\n</tbody></table>\n<p>学生表</p>\n<table>\n<thead>\n<tr>\n<th>学生编号(pk)</th>\n<th>学生姓名</th>\n<th>班级编号(fk)</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>1001</td>\n<td>张三</td>\n<td>01</td>\n</tr>\n<tr>\n<td>1002</td>\n<td>李四</td>\n<td>02</td>\n</tr>\n<tr>\n<td>1003</td>\n<td>王五</td>\n<td>03</td>\n</tr>\n<tr>\n<td>1004</td>\n<td>赵六</td>\n<td>04</td>\n</tr>\n</tbody></table>\n<p><u>第三范式设计技巧：一对多，两张表，多的表，加外键。</u></p>\n<h2 id=\"总结表的设计\"><a href=\"# 总结表的设计\" class=\"headerlink\" title=\"总结表的设计\"></a>总结表的设计 </h2><p> 一对多：</p>\n<p>​        一对多，两张表，多的表加外键。</p>\n<p>多对多：</p>\n<p>​        多对多，三张表，关系表两个外键。</p>\n<p>一对一：</p>\n<p>​        若字段过多，则要考虑拆成多个更小的表，并用外键加以联系。</p>\n<p>​        一对一，外键唯一。</p>\n<p>不过实践和理论之间存在偏差。</p>\n<p><strong>从实践上来说</strong>，设计表的最终目的都是为了满足客户的要求，有时会拿冗余换执行速度。因为在 sql 中，表和表之间连接次数越多，效率越低。(笛卡尔积)</p>\n<h1 id=\"可参考资料：\"><a href=\"# 可参考资料：\" class=\"headerlink\" title=\"可参考资料：\"></a>可参考资料：</h1><p>数据库范式：<a href=\"https://www.zhihu.com/question/24696366/answer/29189700\">https://www.zhihu.com/question/24696366/answer/29189700</a></p>\n","url":"/posts/26678/","min2read":26,"word4post":"6.7k","prev_post":{"title":"《C 和指针》阅读笔记","url":"/posts/46293/"},"next_post":null,"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"前言\" href = \"#\"><span class=\"toc-number\">1.</span> <span class=\"toc-text\">前言 </span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"开始\" href = \"#\"><span class=\"toc-number\">2.</span> <span class=\"toc-text\">开始</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"基本命令\" href = \"#\"><span class=\"toc-number\">3.</span> <span class=\"toc-text\">基本命令</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"part1\" href = \"#\"><span class=\"toc-number\">3.1.</span> <span class=\"toc-text\">part1</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"part2\" href = \"#\"><span class=\"toc-number\">3.2.</span> <span class=\"toc-text\">part2</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"SQL 语句分类\" href = \"#\"><span class=\"toc-number\">4.</span> <span class=\"toc-text\">SQL 语句分类 </span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"DOL\" href = \"#\"><span class=\"toc-number\">4.1.</span> <span class=\"toc-text\">DOL</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"DML\" href = \"#\"><span class=\"toc-number\">4.2.</span> <span class=\"toc-text\">DML</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"DDL\" href = \"#\"><span class=\"toc-number\">4.3.</span> <span class=\"toc-text\">DDL</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"TCL\" href = \"#\"><span class=\"toc-number\">4.4.</span> <span class=\"toc-text\">TCL</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"DCL\" href = \"#\"><span class=\"toc-number\">4.5.</span> <span class=\"toc-text\">DCL</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"导入数据\" href = \"#\"><span class=\"toc-number\">5.</span> <span class=\"toc-text\">导入数据</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"查询 - 单表查询 part1\" href = \"#\"><span class=\"toc-number\">6.</span> <span class=\"toc-text\"> 查询 (单表查询 part1)</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"查询一个字段\" href = \"#\"><span class=\"toc-number\">6.1.</span> <span class=\"toc-text\"> 查询一个字段</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"查询多个字段\" href = \"#\"><span class=\"toc-number\">6.2.</span> <span class=\"toc-text\">查询多个字段</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"查询所有字段\" href = \"#\"><span class=\"toc-number\">6.3.</span> <span class=\"toc-text\">查询所有字段 </span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"查询所有字段并去重\" href = \"#\"><span class=\"toc-number\">6.4.</span> <span class=\"toc-text\">查询所有字段并去重</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"给查询的列起别名\" href = \"#\"><span class=\"toc-number\">6.5.</span> <span class=\"toc-text\">给查询的列起别名</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"条件查询\" href = \"#\"><span class=\"toc-number\">6.6.</span> <span class=\"toc-text\">条件查询 </span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" data-id=\"关系运算符\" href = \"#\"><span class=\"toc-number\">6.6.1.</span> <span class=\"toc-text\"> 关系运算符</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" data-id=\"条件查询语法格式\" href = \"#\"><span class=\"toc-number\">6.6.2.</span> <span class=\"toc-text\">条件查询语法格式</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" data-id=\"比较不熟悉的关系运算符\" href = \"#\"><span class=\"toc-number\">6.6.3.</span> <span class=\"toc-text\">比较不熟悉的关系运算符 </span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" data-id=\"in- 的用法\" href = \"#\"><span class=\"toc-number\">6.6.3.1.</span> <span class=\"toc-text\">in    的用法</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" data-id=\"like- 的用法\" href = \"#\"><span class=\"toc-number\">6.6.3.2.</span> <span class=\"toc-text\">like   的用法 </span></a></li></ol></li></ol></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"排序 - 单表查询 part2\" href = \"#\"><span class=\"toc-number\">7.</span> <span class=\"toc-text\"> 排序 (单表查询 part2)</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"语法\" href = \"#\"><span class=\"toc-number\">7.1.</span> <span class=\"toc-text\"> 语法 </span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"多字段排序\" href = \"#\"><span class=\"toc-number\">7.2.</span> <span class=\"toc-text\">多字段排序</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"根据字段位置排序\" href = \"#\"><span class=\"toc-number\">7.3.</span> <span class=\"toc-text\">根据字段位置排序</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"综合案例\" href = \"#\"><span class=\"toc-number\">7.4.</span> <span class=\"toc-text\">综合案例 </span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"数据处理函数 - 单表查询 part3\" href = \"#\"><span class=\"toc-number\">8.</span> <span class=\"toc-text\"> 数据处理函数 (单表查询 part3)</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"单行处理函数\" href = \"#\"><span class=\"toc-number\">8.1.</span> <span class=\"toc-text\"> 单行处理函数 </span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"多行处理函数 - 分组函数\" href = \"#\"><span class=\"toc-number\">8.2.</span> <span class=\"toc-text\"> 多行处理函数 (分组函数)</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"分组查询 - 单表查询 part4\" href = \"#\"><span class=\"toc-number\">9.</span> <span class=\"toc-text\"> 分组查询 (单表查询 part4)</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"语法 -1\" href = \"#\"><span class=\"toc-number\">9.1.</span> <span class=\"toc-text\">语法 </span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"连接查询\" href = \"#\"><span class=\"toc-number\">10.</span> <span class=\"toc-text\">连接查询 </span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" data-id=\"非等值连接\" href = \"#\"><span class=\"toc-number\">10.0.1.</span> <span class=\"toc-text\">非等值连接</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" data-id=\"自连接\" href = \"#\"><span class=\"toc-number\">10.0.2.</span> <span class=\"toc-text\">自连接 </span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"外连接\" href = \"#\"><span class=\"toc-number\">10.1.</span> <span class=\"toc-text\">外连接 </span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"多表连接\" href = \"#\"><span class=\"toc-number\">10.2.</span> <span class=\"toc-text\">多表连接 </span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"union- 关键字\" href = \"#\"><span class=\"toc-number\">10.3.</span> <span class=\"toc-text\">union 关键字 </span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"子查询\" href = \"#\"><span class=\"toc-number\">11.</span> <span class=\"toc-text\">子查询</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"where 中的子查询\" href = \"#\"><span class=\"toc-number\">11.1.</span> <span class=\"toc-text\">where 中的子查询 </span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"from 中的子查询\" href = \"#\"><span class=\"toc-number\">11.2.</span> <span class=\"toc-text\">from 中的子查询 </span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"select 中的子查询\" href = \"#\"><span class=\"toc-number\">11.3.</span> <span class=\"toc-text\">select 中的子查询 </span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"分页查询\" href = \"#\"><span class=\"toc-number\">12.</span> <span class=\"toc-text\">分页查询 </span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"limit 关键字\" href = \"#\"><span class=\"toc-number\">12.1.</span> <span class=\"toc-text\">limit 关键字</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"分页\" href = \"#\"><span class=\"toc-number\">12.2.</span> <span class=\"toc-text\">分页 </span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"建表\" href = \"#\"><span class=\"toc-number\">13.</span> <span class=\"toc-text\">建表 </span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"修改（update）\" href = \"#\"><span class=\"toc-number\">13.1.</span> <span class=\"toc-text\">修改（update）</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"删除记录 delete（DML）\" href = \"#\"><span class=\"toc-number\">13.2.</span> <span class=\"toc-text\">删除记录 delete（DML）</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"插入多条记录\" href = \"#\"><span class=\"toc-number\">13.3.</span> <span class=\"toc-text\">插入多条记录 </span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"快捷命令\" href = \"#\"><span class=\"toc-number\">13.4.</span> <span class=\"toc-text\">快捷命令 </span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" data-id=\"快速创建表\" href = \"#\"><span class=\"toc-number\">13.4.1.</span> <span class=\"toc-text\"> 快速创建表 </span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" data-id=\"快速删除数据\" href = \"#\"><span class=\"toc-number\">13.4.2.</span> <span class=\"toc-text\">快速删除数据 </span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"约束\" href = \"#\"><span class=\"toc-number\">14.</span> <span class=\"toc-text\">约束 </span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"非空约束\" href = \"#\"><span class=\"toc-number\">14.1.</span> <span class=\"toc-text\">非空约束</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"唯一性约束\" href = \"#\"><span class=\"toc-number\">14.2.</span> <span class=\"toc-text\">唯一性约束</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"主键约束\" href = \"#\"><span class=\"toc-number\">14.3.</span> <span class=\"toc-text\">主键约束 </span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" data-id=\"单一主键和复合主键（分类一）\" href = \"#\"><span class=\"toc-number\">14.3.1.</span> <span class=\"toc-text\">单一主键和复合主键（分类一）</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" data-id=\"自然主键和业务主键（分类二）\" href = \"#\"><span class=\"toc-number\">14.3.2.</span> <span class=\"toc-text\">自然主键和业务主键（分类二）</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"外键约束\" href = \"#\"><span class=\"toc-number\">14.4.</span> <span class=\"toc-text\">外键约束 </span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"存储引擎\" href = \"#\"><span class=\"toc-number\">15.</span> <span class=\"toc-text\">存储引擎 </span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"My-ISAM 存储引擎\" href = \"#\"><span class=\"toc-number\">15.1.</span> <span class=\"toc-text\">My ISAM 存储引擎 </span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"InnoDB 存储引擎（默认引擎）\" href = \"#\"><span class=\"toc-number\">15.2.</span> <span class=\"toc-text\">InnoDB 存储引擎（默认引擎）</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"MEMORY 存储引擎\" href = \"#\"><span class=\"toc-number\">15.3.</span> <span class=\"toc-text\">MEMORY 存储引擎 </span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"事务 -DML 语句\" href = \"#\"><span class=\"toc-number\">16.</span> <span class=\"toc-text\"> 事务 (DML 语句)</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"事务隔离\" href = \"#\"><span class=\"toc-number\">16.1.</span> <span class=\"toc-text\">事务隔离 </span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"索引\" href = \"#\"><span class=\"toc-number\">17.</span> <span class=\"toc-text\">索引 </span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"语法 -2\" href = \"#\"><span class=\"toc-number\">17.1.</span> <span class=\"toc-text\">语法 </span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"索引失效\" href = \"#\"><span class=\"toc-number\">17.2.</span> <span class=\"toc-text\">索引失效</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"索引分类\" href = \"#\"><span class=\"toc-number\">17.3.</span> <span class=\"toc-text\">索引分类 </span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"视图 -view\" href = \"#\"><span class=\"toc-number\">18.</span> <span class=\"toc-text\"> 视图 (view)</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"数据库设计范式\" href = \"#\"><span class=\"toc-number\">19.</span> <span class=\"toc-text\">数据库设计范式 </span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"第一范式\" href = \"#\"><span class=\"toc-number\">19.1.</span> <span class=\"toc-text\">第一范式 </span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"第二范式\" href = \"#\"><span class=\"toc-number\">19.2.</span> <span class=\"toc-text\">第二范式</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"第三范式\" href = \"#\"><span class=\"toc-number\">19.3.</span> <span class=\"toc-text\">第三范式</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" data-id=\"总结表的设计\" href = \"#\"><span class=\"toc-number\">19.4.</span> <span class=\"toc-text\">总结表的设计 </span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" data-id=\"可参考资料：\" href = \"#\"><span class=\"toc-number\">20.</span> <span class=\"toc-text\">可参考资料：</span></a></li></ol>","categories":[],"tags":[{"name":"数据库","path":"api/tags/数据库.json","url":"/tags/数据库/"}]}